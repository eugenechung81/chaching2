<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Chaching2 by eugenechung81</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Chaching2</h1>
      <h2 class="project-tagline">Cha-Ching (v2).  Winner of Best Hackers in Transferwise Hackathon.</h2>
      <a href="https://github.com/eugenechung81/chaching2" class="btn">View on GitHub</a>
      <a href="https://github.com/eugenechung81/chaching2/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/eugenechung81/chaching2/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h1>

<p>Cha-ching was original conceptualized at a Mastercard Hackathon for addressing simplified payments through a keyboard shortcut across all messaging platforms (iMessage, Facebook Message, What's app, Email).  Similiar to Slash, the user will access the keyboard by clicking on the iOS globe button and then inputting the dollar amount to send to the receiver through the chat window.  The sent link is a serialized tag tied to the transfer which the receiptant opens.  This link is a "deep-link" that can open to several options: either a link to install the app or a link to quickly accept the payment through a web portal.  The value proposition of this app is user can pay quickly through any messaging platform and with any payment gateway (Paypal, Venmo, regular ACH).</p>

<p><img src="https://github.com/eugenechung81/chaching2/blob/master/documents/dia1.png?raw=true" alt="&lt;Diagram Here&gt;"></p>

<h1>
<a id="messaging-platform" class="anchor" href="#messaging-platform" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Messaging Platform</h1>

<p>Cha-ching has the capacity to send over any platform because the infrastructure lives inside the keyboard and is not a separate app.  This allows the user to use the keyboard within iMessage, What's app, Gchat, WeChat and not have install a seperate application each time.  The keyboard also allows users to send a payment without having to leave the context of the conversation, open another app, login and punch in the numbers to make the payment.  The advantage is the ability to make a payment within the keyboard itself.  The serialized tag that is sent is picked up from the recipient which will accept the payment if the recipient has the app installed or allow them to accept the payment through a web portal.</p>

<p><img src="https://github.com/eugenechung81/chaching2/blob/master/documents/dia2.png?raw=true" alt="dia2.png"></p>

<p><img src="https://github.com/eugenechung81/chaching2/blob/master/documents/dia6.jpg?raw=true" alt="dia6.jpg"></p>

<h1>
<a id="payment-gateways" class="anchor" href="#payment-gateways" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Payment Gateways</h1>

<p>Venmo, Paypal and Banks are all supported as methods of transfer in Cha-ching.  Users can connect through their preferred payment solution and make payments to the receipent with a different payment login.  This is done through the hawala payment eco-structure.  Cha-ching acts as a broker and holding account for each respective payment solution.  User A using Venmo will "SEND" to Cha-ching Venmo account.  User B is using Paypal will "ACCEPT" from Cha-ching Paypal account.  To the User A and User B, the logical flow is straight forward.  In terms of where the physical money resides, they lie in each respective holding account credited and debited each account.</p>

<p><img src="https://github.com/eugenechung81/chaching2/blob/master/documents/dia3.png?raw=true" alt="dia3.png"></p>

<h1>
<a id="common-flow---rest-apis" class="anchor" href="#common-flow---rest-apis" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Common Flow - Rest APIs</h1>

<p>This is the flow when external services like iOS will invoke in order to create users and transfers.</p>

<h2>
<a id="send" class="anchor" href="#send" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Send</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Create User</span>
response <span class="pl-k">=</span> requests.post(
    <span class="pl-v">url</span><span class="pl-k">=</span><span class="pl-c1">BASE_URL</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>/user<span class="pl-pds">"</span></span>,
    <span class="pl-v">data</span><span class="pl-k">=</span>utils.to_json(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    {</span>
<span class="pl-s">      "py/object": "datas.User",</span>
<span class="pl-s">      "user_id": "917-555-6666",</span>
<span class="pl-s">      "venmo_details": {</span>
<span class="pl-s">        "py/object": "datas.VenmoDetails",</span>
<span class="pl-s">        "access_code": "29665a58391e6a08f027a298c4e2f6bacf8614f9c82e5aa210fa0f838ad2301e",</span>
<span class="pl-s">        "venmo_id": "test-user-5",</span>
<span class="pl-s">        "auth_code": ""</span>
<span class="pl-s">      },</span>
<span class="pl-s">      "bank_details": null,</span>
<span class="pl-s">      "transfer_method": "VENMO",</span>
<span class="pl-s">      "paypal_details": null,</span>
<span class="pl-s">      "password": "test",</span>
<span class="pl-s">      "id": ""</span>
<span class="pl-s">    }</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>),
    <span class="pl-v">headers</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">"</span>Content-Type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>}
)
<span class="pl-c1">print</span> response.content

<span class="pl-c"># Login User</span>
response <span class="pl-k">=</span> requests.post(
    <span class="pl-c1">BASE_URL</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>/token<span class="pl-pds">'</span></span>,
    <span class="pl-v">data</span><span class="pl-k">=</span>{
        <span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>917-555-6666<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>
    })
<span class="pl-c1">print</span> utils.from_json(response.content).get(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>).get(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>)
token <span class="pl-k">=</span> utils.from_json(response.content).get(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>).get(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>)

<span class="pl-c"># Transfer (Create tag id)</span>
rsp <span class="pl-k">=</span> requests.get(
    <span class="pl-c1">BASE_URL</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>/transfer/send<span class="pl-pds">'</span></span>,
    <span class="pl-v">auth</span><span class="pl-k">=</span>HTTPBasicAuth(token, <span class="pl-s"><span class="pl-pds">'</span>x<span class="pl-pds">'</span></span>),
    <span class="pl-v">data</span><span class="pl-k">=</span>{
        <span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.50<span class="pl-pds">"</span></span>
    }
)
<span class="pl-c1">print</span> rsp.content
<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">{</span>
<span class="pl-s">  "data": {</span>
<span class="pl-s">    "paypay_approval": null,</span>
<span class="pl-s">    "tag_id": "7MP2JE",</span>
<span class="pl-s">    "tag_url": "http://localhost:5000/accept?tag_id=7MP2JE"</span>
<span class="pl-s">  },</span>
<span class="pl-s">  "status": true,</span>
<span class="pl-s">  "status_msg": ""</span>
<span class="pl-s">}</span>
<span class="pl-s"><span class="pl-pds">"""</span></span></pre></div>

<h2>
<a id="receive" class="anchor" href="#receive" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Receive</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Create User</span>
response <span class="pl-k">=</span> requests.post(
    <span class="pl-v">url</span><span class="pl-k">=</span><span class="pl-c1">BASE_URL</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>/user<span class="pl-pds">"</span></span>,
    <span class="pl-v">data</span><span class="pl-k">=</span>utils.to_json(<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    {</span>
<span class="pl-s">      "py/object": "datas.User",</span>
<span class="pl-s">      "user_id": "917-555-7777",</span>
<span class="pl-s">      "venmo_details": {</span>
<span class="pl-s">        "py/object": "datas.VenmoDetails",</span>
<span class="pl-s">        "access_code": "29665a58391e6a08f027a298c4e2f6bacf8614f9c82e5aa210fa0f838ad2301e",</span>
<span class="pl-s">        "venmo_id": "test-user-5",</span>
<span class="pl-s">        "auth_code": ""</span>
<span class="pl-s">      },</span>
<span class="pl-s">      "bank_details": null,</span>
<span class="pl-s">      "transfer_method": "VENMO",</span>
<span class="pl-s">      "paypal_details": null,</span>
<span class="pl-s">      "password": "test",</span>
<span class="pl-s">      "id": ""</span>
<span class="pl-s">    }</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>),
    <span class="pl-v">headers</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">"</span>Content-Type<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>}
)
<span class="pl-c1">print</span> response.content

<span class="pl-c"># Login User</span>
response <span class="pl-k">=</span> requests.post(
    <span class="pl-c1">BASE_URL</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>/token<span class="pl-pds">'</span></span>,
    <span class="pl-v">data</span><span class="pl-k">=</span>{
        <span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>917-555-7777<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>
    })
<span class="pl-c1">print</span> utils.from_json(response.content).get(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>).get(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>)
token <span class="pl-k">=</span> utils.from_json(response.content).get(<span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>).get(<span class="pl-s"><span class="pl-pds">"</span>token<span class="pl-pds">"</span></span>)

<span class="pl-c"># Transfer (Receive)</span>
rsp <span class="pl-k">=</span> requests.get(
    <span class="pl-c1">BASE_URL</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>/transfer/receive<span class="pl-pds">'</span></span>,
    <span class="pl-v">auth</span><span class="pl-k">=</span>HTTPBasicAuth(token, <span class="pl-s"><span class="pl-pds">'</span>x<span class="pl-pds">'</span></span>),
    <span class="pl-v">data</span><span class="pl-k">=</span>{
        <span class="pl-s"><span class="pl-pds">"</span>tag_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>1234FF<span class="pl-pds">"</span></span>,
    }
)
<span class="pl-c1">print</span> rsp.content</pre></div>

<h1>
<a id="common-flow---web" class="anchor" href="#common-flow---web" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Common Flow - Web</h1>

<h2>
<a id="send-1" class="anchor" href="#send-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Send</h2>

<pre><code>http://localhost:5000/send
</code></pre>

<p><img src="https://github.com/eugenechung81/chaching2/blob/master/documents/dia4.png?raw=true" alt="dia4.png"></p>

<h2>
<a id="receive-1" class="anchor" href="#receive-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Receive</h2>

<pre><code>http://localhost:5000/accept?tag_id=1234FF
</code></pre>

<p><img src="https://github.com/eugenechung81/chaching2/blob/master/documents/dia5.png?raw=true" alt="dia5.png"></p>

<h1>
<a id="verification" class="anchor" href="#verification" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Verification</h1>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Verify</span>
<span class="pl-c"># http://localhost:5000/users</span>
<span class="pl-c"># http://localhost:5000/transfers</span>
<span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">{</span>
<span class="pl-s">  "bank_details": null,</span>
<span class="pl-s">  "id": "a909f9c6-16a8-40ab-9481-7fd2f79a1c7f",</span>
<span class="pl-s">  "password": "",</span>
<span class="pl-s">  "password_hash": "$5$rounds=571829$F7wsGAlflbgRqyjh$9voqvHDYJs7TltCqvXOMyU8rbgMxNaXjx06XcCGFJPD",</span>
<span class="pl-s">  "paypal_details": null,</span>
<span class="pl-s">  "transfer_method": "VENMO",</span>
<span class="pl-s">  "user_id": "917-555-6666",</span>
<span class="pl-s">  "venmo_details": {</span>
<span class="pl-s">    "access_code": "29665a58391e6a08f027a298c4e2f6bacf8614f9c82e5aa210fa0f838ad2301e",</span>
<span class="pl-s">    "auth_code": "",</span>
<span class="pl-s">    "venmo_id": "test-user-5"</span>
<span class="pl-s">  }</span>
<span class="pl-s">}</span>
<span class="pl-s"></span>
<span class="pl-s">{</span>
<span class="pl-s">  "amount": 2.5,</span>
<span class="pl-s">  "currency": "USD",</span>
<span class="pl-s">  "description": "[Cha-Ching] 917-555-6666 -&gt; None : $2.50",</span>
<span class="pl-s">  "destination_details": null,</span>
<span class="pl-s">  "destination_method": "",</span>
<span class="pl-s">  "destination_user_id": null,</span>
<span class="pl-s">  "dwolla_xfer_a2m_uuid": "",</span>
<span class="pl-s">  "dwolla_xfer_m2b_uuid": "",</span>
<span class="pl-s">  "id": "9215dcbb-9cbd-47cd-b4a0-12690e194374",</span>
<span class="pl-s">  "initiated_date": null,</span>
<span class="pl-s">  "logs": [</span>
<span class="pl-s">    "[2015-12-15 01:04:05] A-&gt;Mid Transaction Complete ([User user_id=917-555-6666, method=VENMO, details=(None, [Venmo access_code=29665a58391e6a08f027a298c4e2f6bacf8614f9c82e5aa210fa0f838ad2301e], None)])",</span>
<span class="pl-s">    "[2015-12-15 01:04:05] Tag Id Generated (7MP2JE)"</span>
<span class="pl-s">  ],</span>
<span class="pl-s">  "source_details": null,</span>
<span class="pl-s">  "source_method": "",</span>
<span class="pl-s">  "source_user_id": "917-555-6666",</span>
<span class="pl-s">  "status": "",</span>
<span class="pl-s">  "tag_id": "7MP2JE"</span>
<span class="pl-s">},</span>
<span class="pl-s"><span class="pl-pds">"""</span></span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/eugenechung81/chaching2">Chaching2</a> is maintained by <a href="https://github.com/eugenechung81">eugenechung81</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
